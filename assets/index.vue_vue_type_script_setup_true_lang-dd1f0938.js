import{U as n,g as L,h as f,N as E,E as v,r as p,S as q,T as C,u as o,o as M,c as N,a as t,w as s,b as _}from"./index-2063e8c9.js";const g={list:a=>n.get("manager/list",{params:a,baseURL:"/mock/"}),detail:a=>n.get("manager/detail",{params:{id:a},baseURL:"/mock/"}),create:a=>n.post("manager/create",a,{baseURL:"/mock/"}),edit:a=>n.post("manager/edit",a,{baseURL:"/mock/"}),delete:a=>n.post("manager/delete",{id:a},{baseURL:"/mock/"}),passwordReset:a=>n.post("manager/password/reset",{id:a},{baseURL:"/mock/"}),changeStatus:a=>n.post("manager/change/status",a,{baseURL:"/mock/"}),check:a=>n.post("manager/check",a,{baseURL:"/mock/"})},B=L({__name:"index",props:{id:{default:""}},setup(a,{expose:k}){const V=a,b=f(!1),i=f(),e=f({id:V.id,account:"",name:"",mobile:"",sex:"2"}),x=f({account:[{required:!0,message:"请输入帐号",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:(r,l,d)=>{const u={key:"mobile",value:l};e.value.id!==""&&(u.id=e.value.id),g.check(u).then(c=>{c.data.exist?d(new Error("手机号已存在")):d()})},trigger:"blur"}]});E(()=>{e.value.id!==""&&U()});function U(){b.value=!0,g.detail(e.value.id).then(r=>{b.value=!1,e.value.account=r.data.account,e.value.name=r.data.name,e.value.mobile=r.data.mobile})}return k({submit(){return new Promise(r=>{e.value.id===""?i.value&&i.value.validate(l=>{l&&g.create(e.value).then(()=>{v.success({message:"模拟新增成功",center:!0}),r()})}):i.value&&i.value.validate(l=>{l&&g.edit(e.value).then(()=>{v.success({message:"模拟编辑成功",center:!0}),r()})})})}}),(r,l)=>{const d=p("el-input"),u=p("el-form-item"),c=p("el-radio-button"),R=p("el-radio-group"),h=p("el-form"),w=q("loading");return C((M(),N("div",null,[t(h,{ref_key:"formRef",ref:i,model:o(e),rules:o(x),"label-width":"120px","label-suffix":"："},{default:s(()=>[t(u,{label:"帐号",prop:"account"},{default:s(()=>[t(d,{modelValue:o(e).account,"onUpdate:modelValue":l[0]||(l[0]=m=>o(e).account=m),placeholder:"请输入帐号"},null,8,["modelValue"])]),_:1}),t(u,{label:"姓名",prop:"name"},{default:s(()=>[t(d,{modelValue:o(e).name,"onUpdate:modelValue":l[1]||(l[1]=m=>o(e).name=m),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),t(u,{label:"手机号",prop:"mobile"},{default:s(()=>[t(d,{modelValue:o(e).mobile,"onUpdate:modelValue":l[2]||(l[2]=m=>o(e).mobile=m),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),t(u,{label:"性别",prop:"sex"},{default:s(()=>[t(R,{modelValue:o(e).sex,"onUpdate:modelValue":l[3]||(l[3]=m=>o(e).sex=m)},{default:s(()=>[t(c,{label:"2"},{default:s(()=>[_(" 保密 ")]),_:1}),t(c,{label:"1"},{default:s(()=>[_(" 男 ")]),_:1}),t(c,{label:"0"},{default:s(()=>[_(" 女 ")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])),[[w,o(b)]])}}});export{B as _,g as a};
