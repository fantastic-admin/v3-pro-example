import{g as R,aG as G,h as g,N as H,o as y,c as C,T,ae as Z,u as i,aw as J,t as K,x as Q,_ as U,a as h,w as tt,P as et,e as ot,d as W}from"./index-2063e8c9.js";function P(t,e,o,l){return Number.parseFloat((e-l*e/t+o).toFixed(2))}function lt(t){[...t.querySelectorAll("*")].forEach(e=>t.removeChild(e))}function nt(t){return t.value}function k(t,e){const o=document.createElementNS("http://www.w3.org/2000/svg",t);for(const l in e)o.setAttribute(l,e[l]);return o}function at(t,e,o){if(lt(t),e.length<=1)return;o=o||{},typeof e[0]=="number"&&(e=e.map(a=>({value:a})));const l=o.onmousemove,n=o.onmouseout,f="interactive"in o?o.interactive:!!l,s=o.spotRadius||2,u=s*2,V=o.cursorWidth||2,S=Number.parseFloat(t.attributes["stroke-width"].value),B=o.fetch||nt,b=e.map(a=>B(a)),I=Number.parseFloat(t.attributes.width.value)-u*2,w=Number.parseFloat(t.attributes.height.value),N=w-S*2-u,D=Math.max(...b),c=-1e3,F=b.length-1,M=I/F,m=[],X=P(D,N,S+s,b[0]);let $=`M${u} ${X}`;b.forEach((a,d)=>{const r=d*M+u,p=P(D,N,S+s,a);m.push(Object.assign({},e[d],{index:d,x:r,y:p})),$+=` L ${r} ${p}`});const Y=k("path",{class:"sparkline--line",d:$,fill:"none"}),O=`${$} V ${w} L ${u} ${w} Z`,j=k("path",{class:"sparkline--fill",d:O,stroke:"none"});if(t.appendChild(j),t.appendChild(Y),!f)return;const _=k("line",{class:"sparkline--cursor",x1:c,x2:c,y1:0,y2:w,"stroke-width":V}),x=k("circle",{class:"sparkline--spot",cx:c,cy:c,r:s});t.appendChild(_),t.appendChild(x);const A=k("rect",{width:t.attributes.width.value,height:t.attributes.height.value,style:"fill: transparent; stroke: transparent",class:"sparkline--interaction-layer"});t.appendChild(A),A.addEventListener("mouseout",a=>{_.setAttribute("x1",c.toString()),_.setAttribute("x2",c.toString()),x.setAttribute("cx",c.toString()),n&&n(a)}),A.addEventListener("mousemove",a=>{const d=a.offsetX;let r=m.find(z=>z.x>=d);r||(r=m[F]);const p=m[m.indexOf(r)-1];let v,L;p?(L=p.x+(r.x-p.x)/2,v=d>=L?r:p):v=r;const E=v.x,q=v.y;x.setAttribute("cx",E),x.setAttribute("cy",q),_.setAttribute("x1",E),_.setAttribute("x2",E),l&&l(a,v)})}const st={class:"sparkline"},rt=["width","height","stroke-width","stroke","fill"],it=R({name:"Sparkline",__name:"index",props:{value:{},width:{default:100},height:{default:30},strokeWidth:{default:3},strokeColor:{default:"#dc2b33"},fillColor:{default:"transparent"},cursorColor:{default:"#dc2b33"},spotColor:{default:"#dc2b33"},tooltip:{type:Boolean,default:!1}},setup(t){G(n=>({"6ff16994":n.cursorColor,"768605b0":n.spotColor}));const e=t,o=g(),l=g({show:!1,content:"",top:0,left:0});return H(()=>{at(o.value,e.value,e.tooltip&&{onmousemove:(n,f)=>{l.value.show=!0,l.value.content=f.tooltip,l.value.top=n.offsetY,l.value.left=n.offsetX+20},onmouseout:()=>{l.value.show=!1}})}),(n,f)=>(y(),C("div",st,[(y(),C("svg",{ref_key:"sparklineRef",ref:o,width:n.width,height:n.height,"stroke-width":n.strokeWidth,stroke:n.strokeColor,fill:n.fillColor},null,8,rt)),n.tooltip?T((y(),C("span",{key:0,class:"tooltip",style:J([`left: ${i(l).left}px`,`top: ${i(l).top}px`])},K(i(l).content),5)),[[Z,i(l).show]]):Q("",!0)]))}});const ut=U(it,[["__scopeId","data-v-b0f6ab48"]]),ct=R({name:"ComponentExampleSparkline",__name:"sparkline.demo",setup(t){const e=g([1,5,2,4,8,3,7]),o=g([{tooltip:"值：1",value:1},{tooltip:"值：3",value:3},{tooltip:"值：5",value:5},{tooltip:"值：8",value:8},{tooltip:"值：4",value:4},{tooltip:"值：6",value:6},{tooltip:"值：9",value:9}]);return(l,n)=>{const f=et,s=ut,u=ot;return y(),C("div",null,[h(f,{title:"迷你图",content:"Sparkline"}),h(u,null,{default:tt(()=>[h(s,{value:i(e)},null,8,["value"]),h(s,{value:i(e),"stroke-color":"#409eff","fill-color":"#b3d8ff"},null,8,["value"]),h(s,{value:i(o),tooltip:""},null,8,["value"]),h(s,{value:i(o),tooltip:"","stroke-color":"#409eff","fill-color":"#b3d8ff","cursor-color":"#e6a23c","spot-color":"#909399"},null,8,["value"])]),_:1})])}}});typeof W=="function"&&W(ct);export{ct as default};
