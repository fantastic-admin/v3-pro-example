import{_ as z}from"./index.vue_vue_type_script_setup_true_lang-d5331bf5.js";import{g as E,z as R,p as j,V as U,m as D,v as H,I as W,r as m,o as a,c as g,l as v,u as e,ab as C,a as t,x as i,f as w,w as n,b as d,t as p,k as X,_ as Y}from"./index-2063e8c9.js";import{a as q}from"./index-5e5a1a02.js";import A from"./index-f5757ff3.js";import{u as G}from"./notification-bf0bef18.js";import{u as J}from"./useMainPage-276e4482.js";import"./useTabbar-4ad52ae9.js";function K(y){function f(){if(!document.startViewTransition||window.matchMedia("(prefers-reduced-motion: reduce)").matches){y();return}return document.startViewTransition(async()=>{await Promise.resolve(y())})}return{startViewTransition:f}}const L={class:"tools"},O={class:"buttons"},Q={class:"item"},Z={class:"item"},ee={class:"user-wrapper"},te=E({name:"Tools",__name:"index",setup(y){const f=R(),o=j(),T=U(),h=G();h.init();const{t:k}=D(),$=H(W,Function,!0),N=J(),{isFullscreen:P,toggle:V}=q();function I(u){var s;const{startViewTransition:r}=K(()=>{o.setColorScheme(o.settings.app.colorScheme==="dark"?"light":"dark")});(s=r())==null||s.ready.then(()=>{const l=u.clientX,c=u.clientY,x=Math.hypot(Math.max(l,innerWidth-l),Math.max(c,innerHeight-c)),b=[`circle(0px at ${l}px ${c}px)`,`circle(${x}px at ${l}px ${c}px)`];document.documentElement.animate({clipPath:o.settings.app.colorScheme!=="dark"?b:b.reverse()},{duration:300,easing:"ease-out",pseudoElement:o.settings.app.colorScheme!=="dark"?"::view-transition-new(root)":"::view-transition-old(root)"})})}function B(u){switch(u){case"home":f.push({name:"home"});break;case"setting":f.push({name:"personalSetting"});break;case"preferences":C.emit("global-preferences-toggle");break;case"hotkeys":C.emit("global-hotkeys-intro-toggle");break;case"logout":T.logout();break}}return(u,r)=>{const s=X,l=m("el-badge"),c=m("el-popover"),x=z,b=m("el-avatar"),_=m("el-dropdown-item"),M=m("el-dropdown-menu"),F=m("el-dropdown");return a(),g("div",L,[v("div",O,[e(o).settings.navSearch.enable?(a(),g("span",{key:0,class:"item",onClick:r[0]||(r[0]=S=>e(C).emit("global-search-toggle"))},[t(s,{name:"ri:search-line"})])):i("",!0),e(o).settings.toolbar.enableNotification?(a(),w(c,{key:1,trigger:"hover","show-after":200,placement:"bottom",width:350},{reference:n(()=>[v("span",Q,[t(l,{type:"primary",value:e(h).total,"is-dot":e(h).total>99,hidden:e(h).total===0},{default:n(()=>[t(s,{name:"ri:notification-3-line"})]),_:1},8,["value","is-dot","hidden"])])]),default:n(()=>[t(A)]),_:1})):i("",!0),t(x,null,{default:n(()=>[v("span",Z,[t(s,{name:"ri:translate"})])]),_:1}),e(o).mode==="pc"&&e(o).settings.toolbar.enableFullscreen?(a(),g("span",{key:2,class:"item",onClick:r[1]||(r[1]=(...S)=>e(V)&&e(V)(...S))},[t(s,{name:e(P)?"ri:fullscreen-exit-line":"ri:fullscreen-line"},null,8,["name"])])):i("",!0),e(o).settings.toolbar.enablePageReload?(a(),g("span",{key:3,class:"item",onClick:r[2]||(r[2]=S=>e(N).reload())},[t(s,{name:"iconoir:refresh-double"})])):i("",!0),e(o).settings.toolbar.enableColorScheme?(a(),g("span",{key:4,class:"item",onClick:I},[t(s,{name:e(o).settings.app.colorScheme==="light"?"ri:sun-line":"ri:moon-line"},null,8,["name"])])):i("",!0)]),t(F,{class:"user-container",size:"default",onCommand:B},{dropdown:n(()=>[t(M,{class:"user-dropdown"},{default:n(()=>[e(o).settings.home.enable?(a(),w(_,{key:0,command:"home"},{default:n(()=>[d(p(e($)("route.home",e(o).settings.home.title)),1)]),_:1})):i("",!0),t(_,{command:"setting"},{default:n(()=>[d(p(e(k)("app.profile")),1)]),_:1}),e(o).settings.app.enableUserPreferences?(a(),w(_,{key:1,command:"preferences"},{default:n(()=>[d(p(e(k)("app.preferences")),1)]),_:1})):i("",!0),e(o).mode==="pc"?(a(),w(_,{key:2,divided:"",command:"hotkeys"},{default:n(()=>[d(p(e(k)("app.hotkeys")),1)]),_:1})):i("",!0),t(_,{divided:"",command:"logout"},{default:n(()=>[d(p(e(k)("app.logout")),1)]),_:1})]),_:1})]),default:n(()=>[v("div",ee,[t(b,{size:"small"},{default:n(()=>[t(s,{name:"ep:user-filled"})]),_:1}),d(" "+p(e(T).account)+" ",1),t(s,{name:"ep:caret-bottom"})])]),_:1})])}}});const ce=Y(te,[["__scopeId","data-v-c8d096cd"]]);export{ce as default};
