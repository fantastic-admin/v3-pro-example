import{_ as Ie}from"./index-2ade9b29.js";import{g as we,h as f,N as ie,X as S,r as _,S as Ue,T as A,u as a,o as d,c as E,l as m,a as t,w as l,f as i,x as v,b as u,ag as L,ar as Se,F as P,j as X,i as G,af as H,ae as D,t as K,E as B,P as Ae,k as Be,$ as Re,a0 as Ne,_ as $e}from"./index-2063e8c9.js";import{S as Ee}from"./sortable.esm-0d19b1d3.js";import{a as J}from"./menu-b86efe06.js";const b=I=>(Re("data-v-36b35106"),I=I(),Ne(),I),De={class:"form"},Ke={class:"top-side"},Me={class:"form-left-side"},Oe=b(()=>m("span",{class:"label-tip"},"即 name ，系统唯一",-1)),Te={class:"label-tip"},qe={style:{display:"flex"}},je=b(()=>m("span",{class:"label-tip"},"请勿在带有参数的路由地址上开启该设置",-1)),ze={class:"label-tip"},Fe={class:"label-tip"},Le=b(()=>m("span",{class:"label-tip"},"当缓存规则为“始终缓存”时生效",-1)),Pe=b(()=>m("span",{class:"label-tip"},"如果子路由不在导航显示，则需要设置高亮的上级路由地址",-1)),Xe=b(()=>m("span",{class:"label-tip"},"不宜设置太长，建议控制在4个字符内",-1)),Ge=b(()=>m("span",{class:"label-tip"},"请设置 http/https 开头的完整外链地址",-1)),He=b(()=>m("span",{class:"label-tip"},"请勿与外链同时设置，同时设置时，本设置会失效",-1)),Je=b(()=>m("span",{class:"label-tip"},"请设置有效的长度单位，例如：px/em/rem等",-1)),Qe={class:"form-right-side"},We=b(()=>m("p",null,"设置导航所具备的所有权限，权限池内的权限会用于角色管理",-1)),Ye=b(()=>m("p",{style:{"margin-bottom":"0"}}," 通常只在最子级导航上进行设置 ",-1)),Ze={class:"index"},el={class:"bottom-side"},ll=we({__name:"index",props:{id:{default:""},parentId:{default:""}},emits:["onSubmit"],setup(I,{emit:se}){const Q=I,W=se,M=f(!1),w=f(),e=f({id:Q.id,parentId:Q.parentId,path:"",redirect:"",name:"",component:"",meta:{title:"",icon:"",activeIcon:"",defaultOpened:!1,permanent:!1,auth:[],sidebar:!0,breadcrumb:!0,activeMenu:"",cache:[],noCache:[],badge:"",link:"",iframe:"",copyright:!1,paddingBottom:"0px"},auths:[]}),pe=f({path:[{required:!0,message:"请输入路由地址",trigger:"blur"}],"meta.title":[{required:!0,message:"请输入显示名称",trigger:"blur"}]});ie(()=>{e.value.id!==""&&re()});function re(){M.value=!0,J.detail(e.value.id).then(s=>{M.value=!1,e.value.id=s.data.id,e.value.parentId=s.data.parentId,e.value.path=s.data.path,e.value.redirect=s.data.redirect,e.value.name=s.data.name,e.value.component=s.data.component,e.value.meta=s.data.meta,e.value.auths=s.data.auths})}const h=f(""),O=f(!1),Y=f();function me(s){e.value.meta.auth.splice(e.value.meta.auth.indexOf(s),1)}function ce(){O.value=!0,S(()=>{Y.value.input.focus()})}function Z(){h.value&&(e.value.meta.auth.includes(h.value)?B.warning("标识已存在"):e.value.meta.auth.push(h.value)),O.value=!1,h.value=""}const g=f(""),T=f(!1),ee=f();function fe(s){typeof e.value.meta.cache=="object"&&e.value.meta.cache.splice(e.value.meta.cache.indexOf(s),1)}function _e(){T.value=!0,S(()=>{ee.value.input.focus()})}function le(){g.value&&typeof e.value.meta.cache=="object"&&(e.value.meta.cache.includes(g.value)?B.warning("规则已存在"):e.value.meta.cache.push(g.value)),T.value=!1,g.value=""}const y=f(""),q=f(!1),te=f();function ve(s){e.value.meta.noCache.splice(e.value.meta.noCache.indexOf(s),1)}function be(){q.value=!0,S(()=>{te.value.input.focus()})}function ae(){y.value&&(e.value.meta.noCache.includes(y.value)?B.warning("规则已存在"):e.value.meta.noCache.push(y.value)),q.value=!1,y.value=""}const j=f(),oe=f(0);ie(()=>{ne()});function he(){e.value.auths.push({name:"",value:""}),S(()=>{j.value.setScrollTop(e.value.auths.length*50)})}function ge(s){e.value.auths.splice(s,1)}function ne(){const s=j.value.$el.querySelector(".el-table__body-wrapper tbody");Ee.create(s,{handle:".sortable",animation:300,ghostClass:"ghost",onEnd:({newIndex:n,oldIndex:x})=>{if(n===void 0||x===void 0)return;const c=e.value.auths.splice(x,1)[0];e.value.auths.splice(n,0,c),oe.value+=1,S(()=>ne())}})}function ye(){e.value.id===""?w.value&&w.value.validate(s=>{s&&J.create(e.value).then(()=>{B.success({message:"模拟新增成功",center:!0}),W("onSubmit")})}):w.value&&w.value.validate(s=>{s&&J.edit(e.value).then(()=>{B.success({message:"模拟编辑成功",center:!0}),W("onSubmit")})})}return(s,n)=>{const x=Ae,c=_("el-input"),p=_("el-form-item"),r=_("el-col"),R=_("el-link"),ue=_("el-row"),k=Be,z=_("el-tooltip"),N=_("el-tag"),C=_("el-button"),F=_("el-space"),de=Ie,U=_("el-switch"),Ve=_("el-scrollbar"),$=_("el-table-column"),xe=_("el-table"),ke=_("el-form"),Ce=Ue("loading");return A((d(),E("div",De,[m("div",Ke,[t(ke,{ref_key:"formRef",ref:w,model:a(e),rules:a(pe),"label-position":"top"},{default:l(()=>[m("div",Me,[t(Ve,null,{default:l(()=>[a(e).parentId?(d(),i(x,{key:0,title:"基础配置",content:"标准路由配置，包含 path/redirect/name/component"})):v("",!0),a(e).parentId?(d(),i(ue,{key:1,gutter:30,style:{padding:"20px"}},{default:l(()=>[t(r,{xl:12,lg:24},{default:l(()=>[t(p,{label:"路由地址",prop:"path"},{default:l(()=>[t(c,{modelValue:a(e).path,"onUpdate:modelValue":n[0]||(n[0]=o=>a(e).path=o),clearable:"",placeholder:"请输入路由地址"},null,8,["modelValue"])]),_:1})]),_:1}),t(r,{xl:12,lg:24},{default:l(()=>[t(p,{label:"重定向",prop:"redirect"},{default:l(()=>[t(c,{modelValue:a(e).redirect,"onUpdate:modelValue":n[1]||(n[1]=o=>a(e).redirect=o),clearable:"",placeholder:"请输入重定向地址"},null,8,["modelValue"])]),_:1})]),_:1}),t(r,{xl:12,lg:24},{default:l(()=>[t(p,{prop:"name"},{label:l(()=>[u(" 路由命名 "),Oe]),default:l(()=>[t(c,{modelValue:a(e).name,"onUpdate:modelValue":n[2]||(n[2]=o=>a(e).name=o),clearable:"",placeholder:"请输入路由命名"},null,8,["modelValue"])]),_:1})]),_:1}),t(r,{xl:12,lg:24},{default:l(()=>[t(p,{prop:"component"},{label:l(()=>[u(" 组件路径 "),m("span",Te,[u(" 顶级路由请设置“"),t(R,{type:"primary",underline:!1,onClick:n[3]||(n[3]=L(o=>a(e).component="Layout",["prevent"]))},{default:l(()=>[u("Layout")]),_:1}),u("”，中间层级路由无需设置 ")])]),default:l(()=>[t(c,{modelValue:a(e).component,"onUpdate:modelValue":n[4]||(n[4]=o=>a(e).component=o),clearable:"",placeholder:"请输入完整组件路径"},Se({_:2},[a(e).component!=="Layout"?{name:"prepend",fn:l(()=>[u(" /src/views/ ")]),key:"0"}:void 0]),1032,["modelValue"])]),_:1})]),_:1})]),_:1})):v("",!0),t(x,{title:"扩展配置"},{content:l(()=>[m("div",qe,[u(" 框架扩展配置，详细配置介绍请查看"),t(R,{type:"primary",href:"https://fantastic-admin.gitee.io/guide/router.html#%E5%AF%BC%E8%88%AA%E9%85%8D%E7%BD%AE",target:"_blank"},{default:l(()=>[u(" 框架文档 ")]),_:1})])]),_:1}),t(ue,{gutter:30,style:{padding:"20px"}},{default:l(()=>[t(r,{xl:12,lg:24},{default:l(()=>[t(p,{label:"显示名称",prop:"meta.title"},{default:l(()=>[t(c,{modelValue:a(e).meta.title,"onUpdate:modelValue":n[5]||(n[5]=o=>a(e).meta.title=o),clearable:"",placeholder:"请输入显示名称"},null,8,["modelValue"])]),_:1})]),_:1}),t(r,{xl:12,lg:24},{default:l(()=>[t(p,{prop:"meta.auth"},{label:l(()=>[u(" 鉴权标识 "),t(z,{content:"当设置多个标识时，只要命中其中一个则鉴权通过",placement:"top"},{default:l(()=>[t(k,{name:"ri:question-line"})]),_:1})]),default:l(()=>[t(F,null,{default:l(()=>[(d(!0),E(P,null,X(a(e).meta.auth,o=>(d(),i(N,{key:o,size:"large",closable:"","disable-transitions":!1,onClose:V=>me(o)},{default:l(()=>[u(K(o),1)]),_:2},1032,["onClose"]))),128)),a(O)?(d(),i(c,{key:0,ref_key:"InputAuthRef",ref:Y,modelValue:a(h),"onUpdate:modelValue":n[6]||(n[6]=o=>G(h)?h.value=o:null),style:{width:"200px"},onKeyup:H(Z,["enter"]),onBlur:Z},null,8,["modelValue","onKeyup"])):(d(),i(C,{key:1,onClick:ce},{default:l(()=>[u(" 新增 ")]),_:1}))]),_:1})]),_:1})]),_:1}),t(r,{xl:12,lg:24},{default:l(()=>[t(p,{label:"默认图标",prop:"meta.icon"},{default:l(()=>[t(de,{modelValue:a(e).meta.icon,"onUpdate:modelValue":n[7]||(n[7]=o=>a(e).meta.icon=o)},null,8,["modelValue"])]),_:1})]),_:1}),t(r,{xl:12,lg:24},{default:l(()=>[t(p,{label:"激活图标",prop:"meta.activeIcon"},{default:l(()=>[t(de,{modelValue:a(e).meta.activeIcon,"onUpdate:modelValue":n[8]||(n[8]=o=>a(e).meta.activeIcon=o)},null,8,["modelValue"])]),_:1})]),_:1}),a(e).parentId?(d(),i(r,{key:0,xl:12,lg:24},{default:l(()=>[t(p,{label:"默认展开",prop:"meta.defaultOpened"},{default:l(()=>[t(U,{modelValue:a(e).meta.defaultOpened,"onUpdate:modelValue":n[9]||(n[9]=o=>a(e).meta.defaultOpened=o),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),a(e).parentId?(d(),i(r,{key:1,xl:12,lg:24},{default:l(()=>[t(p,{prop:"meta.permanent"},{label:l(()=>[u(" 常驻标签页 "),je]),default:l(()=>[t(U,{modelValue:a(e).meta.permanent,"onUpdate:modelValue":n[10]||(n[10]=o=>a(e).meta.permanent=o),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),a(e).parentId?(d(),i(r,{key:2,xl:12,lg:24},{default:l(()=>[t(p,{label:"在导航显示",prop:"meta.sidebar"},{default:l(()=>[t(U,{modelValue:a(e).meta.sidebar,"onUpdate:modelValue":n[11]||(n[11]=o=>a(e).meta.sidebar=o),"inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),a(e).parentId?(d(),i(r,{key:3,xl:12,lg:24},{default:l(()=>[t(p,{label:"在面包屑显示",prop:"meta.breadcrumb"},{default:l(()=>[t(U,{modelValue:a(e).meta.breadcrumb,"onUpdate:modelValue":n[12]||(n[12]=o=>a(e).meta.breadcrumb=o),"inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),a(e).parentId?(d(),i(r,{key:4,xl:12,lg:24},{default:l(()=>[t(p,{prop:"meta.cache"},{label:l(()=>[u(" 缓存规则 "),t(z,{content:"当跳转到设置的路由时，则会对当前路由进行缓存",placement:"top"},{default:l(()=>[t(k,{name:"ri:question-line"})]),_:1}),A(m("span",ze,[u("切换为"),t(R,{type:"primary",underline:!1,onClick:n[13]||(n[13]=L(o=>a(e).meta.cache=!0,["prevent"]))},{default:l(()=>[u("始终缓存")]),_:1})],512),[[D,typeof a(e).meta.cache=="object"]]),A(m("span",Fe,[u("切换为"),t(R,{type:"primary",underline:!1,onClick:n[14]||(n[14]=L(o=>a(e).meta.cache=[],["prevent"]))},{default:l(()=>[u("规则模式")]),_:1})],512),[[D,typeof a(e).meta.cache=="boolean"]])]),default:l(()=>[A(t(F,null,{default:l(()=>[(d(!0),E(P,null,X(a(e).meta.cache,o=>(d(),i(N,{key:o,size:"large",closable:"","disable-transitions":!1,onClose:V=>fe(o)},{default:l(()=>[u(K(o),1)]),_:2},1032,["onClose"]))),128)),a(T)?(d(),i(c,{key:0,ref_key:"InputCacheRef",ref:ee,modelValue:a(g),"onUpdate:modelValue":n[15]||(n[15]=o=>G(g)?g.value=o:null),style:{width:"200px"},onKeyup:H(le,["enter"]),onBlur:le},null,8,["modelValue","onKeyup"])):(d(),i(C,{key:1,onClick:_e},{default:l(()=>[u(" 新增 ")]),_:1}))]),_:1},512),[[D,typeof a(e).meta.cache=="object"]]),A(m("div",null," 始终缓存 ",512),[[D,typeof a(e).meta.cache=="boolean"]])]),_:1})]),_:1})):v("",!0),a(e).parentId?(d(),i(r,{key:5,xl:12,lg:24},{default:l(()=>[t(p,{prop:"meta.noCache"},{label:l(()=>[u(" 不缓存规则 "),t(z,{content:"当跳转到设置的路由时，则会对当前路由取消缓存",placement:"top"},{default:l(()=>[t(k,{name:"ri:question-line"})]),_:1}),Le]),default:l(()=>[t(F,null,{default:l(()=>[(d(!0),E(P,null,X(a(e).meta.noCache,o=>(d(),i(N,{key:o,size:"large",closable:"","disable-transitions":!1,onClose:V=>ve(o)},{default:l(()=>[u(K(o),1)]),_:2},1032,["onClose"]))),128)),a(q)?(d(),i(c,{key:0,ref_key:"InputNoCacheRef",ref:te,modelValue:a(y),"onUpdate:modelValue":n[16]||(n[16]=o=>G(y)?y.value=o:null),style:{width:"200px"},onKeyup:H(ae,["enter"]),onBlur:ae},null,8,["modelValue","onKeyup"])):(d(),i(C,{key:1,onClick:be},{default:l(()=>[u(" 新增 ")]),_:1}))]),_:1})]),_:1})]),_:1})):v("",!0),a(e).parentId?(d(),i(r,{key:6,xl:12,lg:24},{default:l(()=>[t(p,{prop:"meta.activeMenu"},{label:l(()=>[u(" 高亮导航 "),Pe]),default:l(()=>[t(c,{modelValue:a(e).meta.activeMenu,"onUpdate:modelValue":n[17]||(n[17]=o=>a(e).meta.activeMenu=o),clearable:"",placeholder:"请输入高亮导航的完整路由地址"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),a(e).parentId?(d(),i(r,{key:7,xl:12,lg:24},{default:l(()=>[t(p,{prop:"meta.badge"},{label:l(()=>[u(" 徽标 "),Xe]),default:l(()=>[t(c,{modelValue:a(e).meta.badge,"onUpdate:modelValue":n[18]||(n[18]=o=>a(e).meta.badge=o),clearable:"",placeholder:"请输入徽标显示内容"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),a(e).parentId?(d(),i(r,{key:8,xl:12,lg:24},{default:l(()=>[t(p,{prop:"meta.link"},{label:l(()=>[u(" 访问外链 "),Ge]),default:l(()=>[t(c,{modelValue:a(e).meta.link,"onUpdate:modelValue":n[19]||(n[19]=o=>a(e).meta.link=o),clearable:"",placeholder:"请输入网址"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),a(e).parentId?(d(),i(r,{key:9,xl:12,lg:24},{default:l(()=>[t(p,{prop:"meta.iframe"},{label:l(()=>[u(" 内嵌网页 "),He]),default:l(()=>[t(c,{modelValue:a(e).meta.iframe,"onUpdate:modelValue":n[20]||(n[20]=o=>a(e).meta.iframe=o),clearable:"",placeholder:"请输入网址"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),a(e).parentId?(d(),i(r,{key:10,xl:12,lg:24},{default:l(()=>[t(p,{label:"底部版权",prop:"meta.copyright"},{default:l(()=>[t(U,{modelValue:a(e).meta.copyright,"onUpdate:modelValue":n[21]||(n[21]=o=>a(e).meta.copyright=o),"inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),a(e).parentId?(d(),i(r,{key:11,xl:12,lg:24},{default:l(()=>[t(p,{prop:"meta.paddingBottom"},{label:l(()=>[u(" 底部填充高度 "),Je]),default:l(()=>[t(c,{modelValue:a(e).meta.paddingBottom,"onUpdate:modelValue":n[22]||(n[22]=o=>a(e).meta.paddingBottom=o),clearable:"",placeholder:"请输入显示名称"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0)]),_:1})]),_:1})]),m("div",Qe,[t(x,{title:"权限池"},{content:l(()=>[We,Ye]),_:1}),(d(),i(xe,{ref_key:"authsTableRef",ref:j,key:a(oe),data:a(e).auths,border:"",stripe:"","highlight-current-row":""},{default:l(()=>[t($,{width:"60",align:"center",fixed:""},{header:l(()=>[t(C,{type:"primary",size:"small",plain:"",circle:"",onClick:he},{icon:l(()=>[t(k,{name:"ep:plus"})]),_:1})]),default:l(o=>[m("span",Ze,K(o.$index+1),1),t(C,{type:"danger",size:"small",plain:"",circle:"",class:"delete",onClick:V=>ge(o.$index)},{icon:l(()=>[t(k,{name:"ep:delete"})]),_:2},1032,["onClick"])]),_:1}),t($,{width:"80",align:"center",fixed:""},{header:l(()=>[u(" 排序 ")]),default:l(()=>[t(N,{type:"info",class:"sortable"},{default:l(()=>[t(k,{name:"ep:d-caret"})]),_:1})]),_:1}),t($,{label:"名称"},{default:l(o=>[t(c,{modelValue:o.row.name,"onUpdate:modelValue":V=>o.row.name=V},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t($,{label:"标识"},{default:l(o=>[t(c,{modelValue:o.row.value,"onUpdate:modelValue":V=>o.row.value=V},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"]))])]),_:1},8,["model","rules"])]),m("div",el,[t(C,{type:"primary",onClick:ye},{default:l(()=>[u(" 提交 ")]),_:1})])])),[[Ce,a(M)]])}}});const ul=$e(ll,[["__scopeId","data-v-36b35106"]]);export{ul as default};
