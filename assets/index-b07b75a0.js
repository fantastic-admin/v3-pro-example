import{p as O,V as U,K as I,g as q,n as G,a7 as J,B as Q,q as H,N as X,ao as x,al as Y,r as R,o as w,c as j,l as g,a as n,ai as L,u as a,aw as Z,T,ae as N,w as F,aj as ee,f as B,W as te,a8 as oe,x as A,ab as ae,k as ie,_ as se}from"./index-2063e8c9.js";import ne from"./index-1bd49d04.js";import re from"./index-db426792.js";import le from"./index-066c24ca.js";import me from"./index-83a9025b.js";import ce from"./index-47257320.js";import pe from"./index-ec6e3a6b.js";import de from"./index-18413986.js";import ue from"./index-a9326b44.js";import fe from"./iframe-d974b20b.js";import he from"./link-1c3a7895.js";import ge from"./index-42eb151a.js";import _e from"./index-482254f2.js";import{u as ye}from"./useMainPage-276e4482.js";import{u as be}from"./useMenu-e6793bb3.js";import"./index-395add8b.js";import"./logo-5973ee4a.js";import"./index-d774b4b1.js";import"./index.vue_vue_type_script_setup_true_lang-d5331bf5.js";import"./index-5e5a1a02.js";import"./index-f5757ff3.js";import"./notification-bf0bef18.js";import"./useTabbar-4ad52ae9.js";import"./main-5e0209c4.js";import"./sub-f8c2b7ab.js";import"./index-580b2865.js";import"./sortable.esm-0d19b1d3.js";import"./index-b9f79237.js";import"./index-0c6ca441.js";function ve(){const d={},e={id:"wm_div_id",prefix:"mask_div_id",text:"测试水印",x:20,y:20,rows:0,cols:0,x_space:50,y_space:50,font:"微软雅黑",color:"black",fontsize:"18px",alpha:.15,width:100,height:100,angle:15,parent_width:0,parent_height:0,parent_node:null,monitor:!0};let t=!1;const _=new MutationObserver(y);function c(o){var D;Object.assign(e,o);const p=document.getElementById(e.id);(D=p==null?void 0:p.parentNode)==null||D.removeChild(p);const b=e.parent_node,s=b||document.body,u=Math.max(s.scrollWidth,s.clientWidth),k=Math.max(s.scrollHeight,s.clientHeight);let S=0,M=0;o.parent_width||o.parent_height?s&&(S=s.offsetTop||0,M=s.offsetLeft||0,e.x=e.x+M,e.y=e.y+S):s&&(S=s.offsetTop||0,M=s.offsetLeft||0);let m=document.getElementById(e.id),v=null;if(m)m.shadowRoot&&(v=m.shadowRoot);else{m=document.createElement("div"),m.id=e.id,m.setAttribute("style","pointer-events: none !important; display: block !important"),typeof m.attachShadow=="function"?v=m.attachShadow({mode:"open"}):v=m;const r=s.children,h=Math.floor(Math.random()*(r.length-1));r[h]?s.insertBefore(m,r[h]):s.appendChild(m)}e.cols=Math.floor((u-e.x)/(e.width+e.x_space));const E=Math.floor((u-e.x-e.width*e.cols)/e.cols);e.x_space=E&&e.x_space;let z;e.rows=Math.floor((k-e.y)/(e.height+e.y_space));const V=Math.floor((k-e.y-e.height*e.rows)/e.rows);e.y_space=V&&e.y_space;let P;b?(z=e.x+e.width*e.cols+e.x_space*(e.cols-1),P=e.y+e.height*e.rows+e.y_space*(e.rows-1)):(z=M+e.x+e.width*e.cols+e.x_space*(e.cols-1),P=S+e.y+e.height*e.rows+e.y_space*(e.rows-1));let W,$;for(let r=0;r<e.rows;r++){b?$=S+e.y+(e.y_space+e.height)*r:$=e.y+(k-P)/2+(e.y_space+e.height)*r;for(let h=0;h<e.cols;h++){b?W=M+e.x+(u-z)/2+(e.width+e.x_space)*h:W=e.x+(u-z)/2+(e.width+e.x_space)*h;const i=document.createElement("div"),K=document.createTextNode(e.text);i.appendChild(K),i.id=e.prefix+r+h,i.style.transform=`rotate(-${e.angle}deg)`,i.style.visibility="",i.style.position="absolute",i.style.left=`${W}px`,i.style.top=`${$}px`,i.style.overflow="hidden",i.style.zIndex="9999999",i.style.opacity=`${e.alpha}`,i.style.fontSize=e.fontsize,i.style.fontFamily=e.font,i.style.color=e.color,i.style.textAlign="center",i.style.width=`${e.width}px`,i.style.height=`${e.height}px`,i.style.display="block",i.style.userSelect="none",v==null||v.appendChild(i)}}if(e.monitor){const r={childList:!0,attributes:!0,subtree:!0,attributeFilter:["style"],attributeOldValue:!0};_.observe(s,r),_.observe(document.getElementById(e.id).shadowRoot,r)}}function f(){var p;const o=document.getElementById(e.id);(p=o==null?void 0:o.parentNode)==null||p.removeChild(o),_.disconnect()}function y(o){if(t){t=!1;return}(d&&o.length===1||o.length===1&&o[0].removedNodes.length>=1)&&c(d)}return{init:function(o){Object.assign(d,o),c(o)},remove:function(){t=!0,f()}}}function xe(){const d=O(),e=U(),{init:t,remove:_}=ve();I(()=>d.settings.app.enableWatermark,y=>{y?c():f()},{immediate:!0}),I(()=>d.settings.app.colorScheme,()=>{d.settings.app.enableWatermark&&c()});function c(){t({text:`Fantastic-admin 水印测试 ${e.account}`,width:150,x:0,y:0,x_space:50,y_space:50,alpha:.1,color:d.settings.app.colorScheme==="light"?"black":"white"})}function f(){try{_()}catch{}}return{loadWatermark:c,removeWatermark:f}}const we={class:"layout"},ke={class:"wrapper"},Se={class:"main"},Me={key:1},Ce=q({name:"Layout",__name:"index",setup(d){const e=G(),t=O(),_=J(),c=Q(),f=ye(),y=H(()=>!!e.meta.iframe),C=H(()=>!!e.meta.link);return xe(),I(()=>t.settings.menu.subMenuCollapse,l=>{t.mode==="mobile"&&(l?document.body.classList.remove("overflow-hidden"):document.body.classList.add("overflow-hidden"))}),I(()=>e.path,()=>{t.mode==="mobile"&&t.$patch(l=>{l.settings.menu.subMenuCollapse=!0})}),X(()=>{x("f5",l=>{t.settings.toolbar.enablePageReload&&(l.preventDefault(),f.reload())}),x("alt+`",l=>{t.settings.menu.enableHotkeys&&(l.preventDefault(),be().switchTo(c.actived+1<c.allMenus.length?c.actived+1:0))}),x("alt+up,alt+down",(l,o)=>{switch(l.preventDefault(),o.key){case"alt+up":f.maximize(!0);break;case"alt+down":f.maximize(!1);break}})}),Y(()=>{x.unbind("f5"),x.unbind("alt+`"),x.unbind("alt+up,alt+down")}),(l,o)=>{const p=ie,b=R("router-view"),s=R("el-backtop");return w(),j("div",we,[g("div",{id:"app-main",class:L({"main-page-maximize":a(t).mainPageMaximizeStatus})},[n(ne),g("div",ke,[g("div",{class:L(["sidebar-container",{show:a(t).mode==="mobile"&&!a(t).settings.menu.subMenuCollapse}])},[n(re),n(le)],2),g("div",{class:L(["sidebar-mask",{show:a(t).mode==="mobile"&&!a(t).settings.menu.subMenuCollapse}]),onClick:o[0]||(o[0]=u=>a(t).toggleSidebarCollapse())},null,2),g("div",{class:"main-container",style:Z({"padding-bottom":a(e).meta.paddingBottom})},[n(me),g("div",Se,[T(g("div",{class:"exit-main-page-maximize",onClick:o[1]||(o[1]=u=>a(t).setMainPageMaximize())},[n(p,{name:"ri:logout-box-line"})],512),[[N,a(t).mainPageMaximizeStatus]]),n(b,null,{default:F(({Component:u,route:k})=>[n(ee,{name:a(t).settings.mainPage.enableTransition?a(t).settings.mainPage.transitionMode:"",mode:"out-in",appear:""},{default:F(()=>[(w(),B(oe,{include:a(_).list},[T((w(),B(te(u),{key:k.fullPath})),[[N,!(a(y)||a(C))]])],1032,["include"]))]),_:2},1032,["name"])]),_:1}),T(n(fe,null,null,512),[[N,a(y)&&!a(C)]]),a(C)?(w(),B(he,{key:0})):A("",!0)]),n(ge)],4)]),n(s,{right:20,bottom:20,title:"回到顶部"})],2),n(ce),a(t).settings.app.enableUserPreferences?(w(),B(pe,{key:0})):A("",!0),n(de),a(t).settings.app.enableAppSetting?(w(),j("div",Me,[g("div",{class:"app-setting",onClick:o[2]||(o[2]=u=>a(ae).emit("global-app-setting-toggle"))},[n(p,{name:"uiw:setting-o"})]),n(ue)])):A("",!0),n(_e)])}}});const ot=se(Ce,[["__scopeId","data-v-b10fe686"]]);export{ot as default};
