import{g as M,r as f,o as _,f as E,w as r,c as z,l as i,a as t,x as B,E as b,k as L,$ as A,a0 as G,b as H,_ as R,h as O,F as J,j as K,T as I,ae as j,aw as V,u as $,ai as F,i as T,P as Q,e as W,d as D}from"./index-2063e8c9.js";import{_ as X}from"./index-d621c29b.js";const Y=g=>(A("data-v-654cb5f6"),g=g(),G(),g),Z={class:"slot"},x=Y(()=>i("div",{class:"el-upload__text"},[H(" 将文件拖到此处，或"),i("em",null,"点击上传")],-1)),ee={key:0,class:"el-upload__tip"},te={style:{display:"inline-block"}},se=M({name:"FileUpload",__name:"index",props:{action:{},headers:{},data:{},name:{default:"file"},size:{default:2},max:{default:3},files:{default:()=>[]},notip:{type:Boolean,default:!1},ext:{default:()=>["zip","rar"]}},emits:["onSuccess"],setup(g,{emit:v}){const l=g,w=v,a=o=>{const p=o.name.split(".").at(-1)??"",d=l.ext.includes(p),h=o.size/1024/1024<l.size;return d||b.error(`上传文件只支持 ${l.ext.join(" / ")} 格式！`),h||b.error(`上传文件大小不能超过 ${l.size}MB！`),d&&h},S=()=>{b.warning("文件上传超过限制")},C=(o,s,p)=>{w("onSuccess",o,s,p)};return(o,s)=>{const p=L,d=f("el-alert"),h=f("el-upload");return _(),E(h,{headers:o.headers,action:o.action,data:o.data,name:o.name,"before-upload":a,"on-exceed":S,"on-success":C,"file-list":o.files,limit:o.max,drag:""},{tip:r(()=>[o.notip?B("",!0):(_(),z("div",ee,[i("div",te,[t(d,{title:`上传文件支持 ${o.ext.join(" / ")} 格式，单个文件大小不超过 ${o.size}MB，且文件数量不超过 ${o.max} 个`,type:"info","show-icon":"",closable:!1},null,8,["title"])])]))]),default:r(()=>[i("div",Z,[t(p,{name:"ep:upload-filled",class:"el-icon--upload"}),x])]),_:1},8,["headers","action","data","name","file-list","limit"])}}});const oe=R(se,[["__scopeId","data-v-654cb5f6"]]),ae={class:"upload-container"},le={class:"mask"},ne={class:"actions"},ie=["onClick"],pe=["onClick"],ce=["onClick"],ue=["onClick"],re={key:0,class:"el-upload__tip"},de={style:{display:"inline-block"}},me=M({name:"ImagesUpload",__name:"index",props:{action:{},headers:{},data:{},name:{default:"file"},url:{default:()=>[]},size:{default:2},max:{default:3},width:{default:150},height:{default:150},placeholder:{default:""},notip:{type:Boolean,default:!1},ext:{default:()=>["jpg","png","gif","bmp"]}},emits:["update:url","onSuccess"],setup(g,{emit:v}){const l=g,w=v,a=O({dialogImageIndex:0,imageViewerVisible:!1,progress:{preview:"",percent:0}});function S(e){a.value.dialogImageIndex=e,a.value.imageViewerVisible=!0}function C(){a.value.imageViewerVisible=!1}function o(e){const m=l.url;m.splice(e,1),w("update:url",m)}function s(e,m){const n=l.url;m==="left"&&e!==0&&(n[e]=n.splice(e-1,1,n[e])[0]),m==="right"&&e!==n.length-1&&(n[e]=n.splice(e+1,1,n[e])[0]),w("update:url",n)}const p=e=>{const n=e.name.split(".").at(-1)??"",c=l.ext.includes(n),y=e.size/1024/1024<l.size;return c||b.error(`上传图片只支持 ${l.ext.join(" / ")} 格式！`),y||b.error(`上传图片大小不能超过 ${l.size}MB！`),c&&y&&(a.value.progress.preview=URL.createObjectURL(e)),c&&y},d=e=>{a.value.progress.percent=~~e.percent},h=e=>{a.value.progress.preview="",a.value.progress.percent=0,w("onSuccess",e)};return(e,m)=>{const n=f("el-image"),c=L,y=f("el-progress"),u=f("el-upload"),U=f("el-alert"),P=f("el-image-viewer");return _(),z("div",ae,[(_(!0),z(J,null,K(e.url,(q,k)=>(_(),z("div",{key:k,class:"images"},[k<e.max?(_(),E(n,{key:0,src:q,style:V(`width:${e.width}px;height:${e.height}px;`),fit:"cover"},null,8,["src","style"])):B("",!0),i("div",le,[i("div",ne,[i("span",{title:"预览",onClick:N=>S(k)},[t(c,{name:"ep:zoom-in"})],8,ie),i("span",{title:"移除",onClick:N=>o(k)},[t(c,{name:"ep:delete"})],8,pe),I(i("span",{title:"左移",class:F({disabled:k===0}),onClick:N=>s(k,"left")},[t(c,{name:"ep:back"})],10,ce),[[j,e.url.length>1]]),I(i("span",{title:"右移",class:F({disabled:k===e.url.length-1}),onClick:N=>s(k,"right")},[t(c,{name:"ep:right"})],10,ue),[[j,e.url.length>1]])])])]))),128)),I(t(u,{"show-file-list":!1,headers:e.headers,action:e.action,data:e.data,name:e.name,"before-upload":p,"on-progress":d,"on-success":h,drag:"",class:"images-upload"},{default:r(()=>[i("div",{class:"image-slot",style:V(`width:${e.width}px;height:${e.height}px;`)},[t(c,{name:"ep:plus"})],4),I(i("div",{class:"progress",style:V(`width:${e.width}px;height:${e.height}px;`)},[t(n,{src:$(a).progress.preview,style:V(`width:${e.width}px;height:${e.height}px;`),fit:"fill"},null,8,["src","style"]),t(y,{type:"circle",width:Math.min(e.width,e.height)*.8,percentage:$(a).progress.percent},null,8,["width","percentage"])],4),[[j,$(a).progress.percent]])]),_:1},8,["headers","action","data","name"]),[[j,e.url.length<e.max]]),e.notip?B("",!0):(_(),z("div",re,[i("div",de,[t(U,{title:`上传图片支持 ${e.ext.join(" / ")} 格式，单张图片大小不超过 ${e.size}MB，建议图片尺寸为 ${e.width}*${e.height}，且图片数量不超过 ${e.max} 张`,type:"info","show-icon":"",closable:!1},null,8,["title"])])])),$(a).imageViewerVisible?(_(),E(P,{key:1,"url-list":e.url,"initial-index":$(a).dialogImageIndex,teleported:"",onClose:C},null,8,["url-list","initial-index"])):B("",!0)])}}});const he=R(me,[["__scopeId","data-v-7ed7c147"]]),_e=i("p",null,"ImageUpload / ImagesUpload / FileUpload",-1),fe=i("p",{style:{"margin-bottom":"0"}}," 由于线上演示环境开启了 Mock ，会导致上传功能报错，请在本地运行并查看演示 ",-1),ge=M({name:"ComponentExampleUpload",__name:"upload.demo",setup(g){const v=O("https://picsum.photos/750/450"),l=O(["https://picsum.photos/400","https://picsum.photos/600","https://picsum.photos/500"]),w=O([{name:"测试文件.zip",url:"http://images.lookbi.com/uploads/apply/96/d8521fc691e472eec91a170201866e7d.zip"}]);function a(s){s.error===""?v.value=s.data.path:b.warning(s.error)}function S(s){s.error===""?l.value.push(s.data.path):b.warning(s.error)}function C(s,p,d){s.error===""?w.value.push({name:p.name,url:s.error===""?s.data.path:""}):(d.pop(),b.warning(s.error))}const o=[{image:"https://picsum.photos/750/450",images:["https://picsum.photos/400","https://picsum.photos/600","https://picsum.photos/500"]},{image:"https://picsum.photos/750/450",images:["https://picsum.photos/400","https://picsum.photos/600","https://picsum.photos/500"]},{image:"https://picsum.photos/750/450",images:["https://picsum.photos/400","https://picsum.photos/600","https://picsum.photos/500"]},{image:"https://picsum.photos/750/450",images:["https://picsum.photos/400","https://picsum.photos/600","https://picsum.photos/500"]}];return(s,p)=>{const d=Q,h=X,e=W,m=he,n=oe,c=f("el-table-column"),y=f("el-table");return _(),z("div",null,[t(d,{title:"上传"},{content:r(()=>[_e,fe]),_:1}),t(e,{title:"单图上传"},{default:r(()=>[t(h,{url:$(v),"onUpdate:url":p[0]||(p[0]=u=>T(v)?v.value=u:null),action:"https://console-mock.apipost.cn/app/mock/project/1f50f1da-5189-4282-d3c7-c133a514c5a8/upload/image",name:"image",width:250,height:150,onOnSuccess:a},null,8,["url"])]),_:1}),t(e,{title:"多图上传（默认最多3张）"},{default:r(()=>[t(m,{url:$(l),"onUpdate:url":p[1]||(p[1]=u=>T(l)?l.value=u:null),action:"https://console-mock.apipost.cn/app/mock/project/1f50f1da-5189-4282-d3c7-c133a514c5a8/upload/image",name:"image",onOnSuccess:S},null,8,["url"])]),_:1}),t(e,{title:"文件上传（默认最多3个）"},{default:r(()=>[t(n,{files:$(w),action:"https://console-mock.apipost.cn/app/mock/project/1f50f1da-5189-4282-d3c7-c133a514c5a8/upload/file",onOnSuccess:C},null,8,["files"])]),_:1}),t(e,{title:"结合 el-table 使用"},{default:r(()=>[t(y,{data:o,style:{width:"100%"}},{default:r(()=>[t(c,{type:"index",width:"50",fixed:"left"}),t(c,{label:"单张图片"},{default:r(({row:u})=>[t(h,{url:u.image,"onUpdate:url":U=>u.image=U,action:"https://console-mock.apipost.cn/app/mock/project/1f50f1da-5189-4282-d3c7-c133a514c5a8/upload/image",name:"image",width:250,height:150,onOnSuccess:a},null,8,["url","onUpdate:url"])]),_:1}),t(c,{label:"多张图片"},{default:r(({row:u})=>[t(m,{url:u.images,"onUpdate:url":U=>u.images=U,action:"https://console-mock.apipost.cn/app/mock/project/1f50f1da-5189-4282-d3c7-c133a514c5a8/upload/image",name:"image",onOnSuccess:S},null,8,["url","onUpdate:url"])]),_:1})]),_:1})]),_:1})])}}});typeof D=="function"&&D(ge);export{ge as default};
