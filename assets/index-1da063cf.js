import{_ as q}from"./index-0ccd1521.js";import{g as A,h as G,N as H,r,S as J,o as p,c as f,a,l as K,w as t,u as o,T as O,f as _,x as Q,X as v,a2 as R,E as W,P as Y,k as Z,_ as ee,d as b}from"./index-2063e8c9.js";import ae from"./index-ed0f75f2.js";import ne from"./index-b9584697.js";import{a as h}from"./table-f966dcf4.js";import{u as oe}from"./usePagination-4a1ec3e2.js";import"./sortable.esm-0d19b1d3.js";const te={class:"absolute-container"},ie={class:"page-main"},le={key:1,class:"empty"},C=A({name:"PagesExampleTable",__name:"index",setup(se){const{pagination:l,getParams:y,onSizeChange:k,onCurrentChange:w,onSortChange:x}=oe();l.value.size=20,l.value.sizes=[20,50,100];const e=G({loading:!1,search:{name:""},dataList:[],selectionDataList:[],form:{visible:!1,id:""},dialog:{visible:!1,id:"",info:{}}});H(()=>{c()});function c(){e.value.loading=!0;const n={...y(),...e.value.search.name&&{name:e.value.search.name}};h.list(n).then(i=>{e.value.loading=!1,e.value.dataList=i.data.list,l.value.total=i.data.total})}function z(n){k(n).then(()=>c())}function S(n=1){w(n).then(()=>c())}function T({prop:n,order:i}){x(n,i).then(()=>c())}function D(){e.value.form.visible=!1,v(()=>{e.value.form.visible=!0,e.value.form.id=""})}function L(n){e.value.form.visible=!1,v(()=>{e.value.form.visible=!0,e.value.form.id=n.id})}function P(n){R.confirm(`确认删除「${n.name}」表格吗？`,"确认信息").then(()=>{h.delete(n.id).then(()=>{c(),W.success({message:"模拟删除成功",center:!0})})}).catch(()=>{})}function E(n){e.value.dialog.visible=!0,e.value.dialog.id=n.id,e.value.dialog.info={}}function V(n){e.value.dialog.visible=!0,e.value.dialog.id="",e.value.dialog.info=n}function B(){e.value.form.visible=!1,c()}function M(){e.value.form.visible=!1}return(n,i)=>{const N=Y,d=Z,u=r("el-button"),$=r("el-space"),m=r("el-table-column"),F=r("el-button-group"),I=r("el-table"),U=r("el-pagination"),X=q,j=J("loading");return p(),f("div",te,[a(N,{title:"表格管理",content:"页面数据为 Mock 示例数据，非真实数据。"}),K("div",ie,[a(X,{"left-side-width":"520px","hide-left-side-toggle":""},{leftSide:t(()=>[a($,{wrap:""},{default:t(()=>[a(u,{type:"primary",size:"default",onClick:D},{icon:t(()=>[a(d,{name:"ep:plus"})]),_:1}),a(u,{type:"danger",size:"default",disabled:!o(e).selectionDataList.length},{icon:t(()=>[a(d,{name:"ep:delete"})]),_:1},8,["disabled"])]),_:1}),O((p(),_(I,{class:"list-table",data:o(e).dataList,border:"",stripe:"","highlight-current-row":"",height:"100%",onSortChange:T,onSelectionChange:i[0]||(i[0]=s=>o(e).selectionDataList=s)},{default:t(()=>[a(m,{type:"selection",align:"center",fixed:""}),a(m,{prop:"name",label:"名称","min-width":"150px"}),a(m,{prop:"code",label:"标识",width:"150",align:"center"}),a(m,{label:"操作",width:"140",align:"center",fixed:"right"},{default:t(s=>[a(F,null,{default:t(()=>[a(u,{type:"primary",size:"small",plain:"",onClick:g=>L(s.row)},{icon:t(()=>[a(d,{name:"ep:edit"})]),_:2},1032,["onClick"]),a(u,{type:"info",size:"small",plain:"",onClick:g=>E(s.row)},{icon:t(()=>[a(d,{name:"ep:view"})]),_:2},1032,["onClick"]),a(u,{type:"danger",size:"small",plain:"",onClick:g=>P(s.row)},{icon:t(()=>[a(d,{name:"ep:delete"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[j,o(e).loading]]),a(U,{"current-page":o(l).page,total:o(l).total,"page-size":o(l).size,"page-sizes":o(l).sizes,layout:o(l).layout,"hide-on-single-page":!1,class:"pagination",background:"",onCurrentChange:S,onSizeChange:z},null,8,["current-page","total","page-size","page-sizes","layout"])]),default:t(()=>[o(e).form.visible?(p(),_(ae,{key:0,id:o(e).form.id,onSuccess:B,onCancel:M,onPreview:V},null,8,["id"])):(p(),f("div",le," 请在左侧新增或编辑一个表格 "))]),_:1}),o(e).dialog.visible?(p(),_(ne,{key:0,id:o(e).dialog.id,modelValue:o(e).dialog.visible,"onUpdate:modelValue":i[1]||(i[1]=s=>o(e).dialog.visible=s),info:o(e).dialog.info},null,8,["id","modelValue","info"])):Q("",!0)])])}}});typeof b=="function"&&b(C);const ge=ee(C,[["__scopeId","data-v-44a662f8"]]);export{ge as default};
