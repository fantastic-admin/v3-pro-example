import{g as O,h as y,N as Q,ab as k,aA as W,r as i,S as X,o as m,c as Y,a,w as o,u as t,af as Z,b as d,t as ee,f as _,x as g,T as te,ai as ae,a2 as oe,E as ne,P as le,k as se,e as ie,_ as re,d as M}from"./index-2063e8c9.js";import{_ as de}from"./index-b7719e05.js";import{_ as ue}from"./index.vue_vue_type_script_setup_true_lang-a20beafd.js";import{a as z}from"./department-243f0b10.js";import{u as ce}from"./usePagination-4a1ec3e2.js";import{u as pe}from"./useTabbar-4ad52ae9.js";import"./index.vue_vue_type_script_setup_true_lang-2d102f7d.js";const D=O({name:"PagesExampleDepartmentList",__name:"list",setup(me){const{pagination:p,getParams:w,onSizeChange:x,onCurrentChange:P,onSortChange:L}=ce(),b=pe(),E=y(),e=y({loading:!1,tableAutoHeight:!1,formMode:"dialog",formModeProps:{visible:!1,id:""},search:{title:""},searchFold:!0,batch:{enable:!1,selectionDataList:[]},dataList:[]});Q(()=>{c(),e.value.formMode==="router"&&k.on("get-data-list",()=>{c()})}),W(()=>{e.value.formMode==="router"&&k.off("get-data-list")});function c(){e.value.loading=!0;const l={...w(),...e.value.search.title&&{title:e.value.search.title}};z.list(l).then(n=>{e.value.loading=!1,e.value.dataList=n.data.list,p.value.total=n.data.total})}function $(l){x(l).then(()=>c())}function f(l=1){P(l).then(()=>c())}function V({prop:l,order:n}){L(l,n).then(()=>c())}function S(){e.value.formMode==="router"?b.open({name:"pagesExampleGeneralDepartmentCreate"}):(e.value.formModeProps.id="",e.value.formModeProps.visible=!0)}function B(l){e.value.formMode==="router"?b.open({name:"pagesExampleGeneralDepartmentEdit",params:{id:l.id}}):(e.value.formModeProps.id=l.id,e.value.formModeProps.visible=!0)}function N(l){oe.confirm(`确认删除「${l.title}」吗？`,"确认信息").then(()=>{z.delete(l.id).then(()=>{c(),ne.success({message:"模拟删除成功",center:!0})})}).catch(()=>{})}function A(l){b.open({name:"pagesExampleGeneralJobList",params:{department_id:l.id}})}return(l,n)=>{const F=le,G=i("el-input"),C=i("el-form-item"),h=se,r=i("el-button"),T=i("el-form"),U=de,H=i("el-divider"),I=i("el-button-group"),J=i("el-space"),v=i("el-table-column"),K=i("el-table"),R=i("el-pagination"),j=ie,q=X("loading");return m(),Y("div",{class:ae({"absolute-container":t(e).tableAutoHeight})},[a(F,{title:"部门管理",content:"页面数据为 Mock 示例数据，非真实数据。"}),a(j,null,{default:o(()=>[a(U,{fold:t(e).searchFold,"show-toggle":!1},{default:o(({fold:s})=>[a(T,{model:t(e).search,size:"default","label-width":"100px",inline:"","inline-message":"",class:"search-form"},{default:o(()=>[a(C,{label:"部门"},{default:o(()=>[a(G,{modelValue:t(e).search.title,"onUpdate:modelValue":n[0]||(n[0]=u=>t(e).search.title=u),placeholder:"请输入部门，支持模糊查询",clearable:"",onKeydown:n[1]||(n[1]=Z(u=>f(),["enter"])),onClear:n[2]||(n[2]=u=>f())},null,8,["modelValue"])]),_:1}),a(C,null,{default:o(()=>[a(r,{type:"primary",onClick:n[3]||(n[3]=u=>f())},{icon:o(()=>[a(h,{name:"ep:search"})]),default:o(()=>[d(" 筛选 ")]),_:1}),a(r,{link:"",disabled:"",onClick:u=>t(e).searchFold=!s},{icon:o(()=>[a(h,{name:s?"ep:caret-bottom":"ep:caret-top"},null,8,["name"])]),default:o(()=>[d(" "+ee(s?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1},8,["fold"]),a(H,{"border-style":"dashed"}),a(J,{wrap:""},{default:o(()=>[a(r,{type:"primary",size:"default",onClick:S},{icon:o(()=>[a(h,{name:"ep:plus"})]),default:o(()=>[d(" 新增部门 ")]),_:1}),t(e).batch.enable?(m(),_(r,{key:0,size:"default",disabled:!t(e).batch.selectionDataList.length},{default:o(()=>[d(" 单个批量操作按钮 ")]),_:1},8,["disabled"])):g("",!0),t(e).batch.enable?(m(),_(I,{key:1},{default:o(()=>[a(r,{size:"default",disabled:!t(e).batch.selectionDataList.length},{default:o(()=>[d(" 批量操作按钮组1 ")]),_:1},8,["disabled"]),a(r,{size:"default",disabled:!t(e).batch.selectionDataList.length},{default:o(()=>[d(" 批量操作按钮组2 ")]),_:1},8,["disabled"])]),_:1})):g("",!0)]),_:1}),te((m(),_(K,{ref_key:"tableRef",ref:E,class:"list-table",data:t(e).dataList,border:"",stripe:"","highlight-current-row":"",height:"100%",onSortChange:V,onSelectionChange:n[4]||(n[4]=s=>t(e).batch.selectionDataList=s)},{default:o(()=>[t(e).batch.enable?(m(),_(v,{key:0,type:"selection",width:"40"})):g("",!0),a(v,{prop:"title",label:"部门"}),a(v,{label:"操作",width:"250",align:"center"},{default:o(s=>[a(r,{type:"info",size:"small",plain:"",onClick:u=>A(s.row)},{default:o(()=>[d(" 查看职位 ")]),_:2},1032,["onClick"]),a(r,{type:"primary",size:"small",plain:"",onClick:u=>B(s.row)},{default:o(()=>[d(" 编辑 ")]),_:2},1032,["onClick"]),a(r,{type:"danger",size:"small",plain:"",onClick:u=>N(s.row)},{default:o(()=>[d(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[q,t(e).loading]]),a(R,{"current-page":t(p).page,total:t(p).total,"page-size":t(p).size,"page-sizes":t(p).sizes,layout:t(p).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:$,onCurrentChange:f},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),t(e).formMode==="dialog"||t(e).formMode==="drawer"?(m(),_(ue,{key:0,id:t(e).formModeProps.id,modelValue:t(e).formModeProps.visible,"onUpdate:modelValue":n[5]||(n[5]=s=>t(e).formModeProps.visible=s),mode:t(e).formMode,onSuccess:c},null,8,["id","modelValue","mode"])):g("",!0)],2)}}});typeof M=="function"&&M(D);const ye=re(D,[["__scopeId","data-v-5a1ddfa0"]]);export{ye as default};
