import{a as S}from"./table-f966dcf4.js";import{u as P}from"./usePagination-4a1ec3e2.js";import{g as D,h as c,N as F,r,o as p,f,w as g,a as m,c as N,j as T,u as o,F as j,i as E,_ as M}from"./index-2063e8c9.js";const R=D({__name:"index",props:{modelValue:{type:Boolean,default:!1},id:{default:""},info:{default:{}}},emits:["update:modelValue"],setup(_,{emit:b}){const t=_,h=b,u=c(t.modelValue),{pagination:s,getParams:v,onSizeChange:C,onCurrentChange:x,onSortChange:w}=P(),e=c({loading:!1,dataList:[],border:!1,stripe:!1,header:!0,columns:[]});F(()=>{d()});function d(){e.value.loading=!0;const l={...v(),...t.id&&{id:t.id},...t.info.code&&{code:t.info.code}};S.preview(l).then(a=>{e.value.loading=!1,e.value.dataList=a.data.list,s.value.total=a.data.total,t.id?(e.value.border=a.data.tableInfo.border,e.value.stripe=a.data.tableInfo.stripe,e.value.header=a.data.tableInfo.header,e.value.columns=a.data.tableInfo.columns.filter(i=>i.enable)):(e.value.border=t.info.border,e.value.stripe=t.info.stripe,e.value.header=t.info.header,e.value.columns=t.info.columns.filter(i=>i.enable))})}function y(l){C(l).then(()=>d())}function z(l=1){x(l).then(()=>d())}function V({prop:l,order:a}){w(l,a).then(()=>d())}return(l,a)=>{const i=r("el-table-column"),k=r("el-table"),I=r("el-pagination"),L=r("el-dialog");return p(),f(L,{modelValue:o(u),"onUpdate:modelValue":a[0]||(a[0]=n=>E(u)?u.value=n:null),title:"预览",width:"80%","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":"",onClosed:a[1]||(a[1]=n=>h("update:modelValue",!1))},{default:g(()=>[m(k,{data:o(e).dataList,border:o(e).border,stripe:o(e).stripe,"show-header":o(e).header,onSortChange:V},{default:g(()=>[(p(!0),N(j,null,T(o(e).columns,(n,B)=>(p(),f(i,{key:B,label:n.name,prop:n.field,width:n.width,align:n.align,sortable:n.sortable,fixed:n.fixed?n.fixed:!1},null,8,["label","prop","width","align","sortable","fixed"]))),128))]),_:1},8,["data","border","stripe","show-header"]),m(I,{"current-page":o(s).page,total:o(s).total,"page-size":o(s).size,"page-sizes":o(s).sizes,layout:o(s).layout,"hide-on-single-page":!1,class:"pagination",background:"",onCurrentChange:z,onSizeChange:y},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1},8,["modelValue"])}}});const A=M(R,[["__scopeId","data-v-5906aec3"]]);export{A as default};
