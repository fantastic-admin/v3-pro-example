import{_ as V}from"./index-0ccd1521.js";import{g as D,h as v,N as L,r as p,o as u,c as x,a as e,l as c,w as t,b as R,u as m,f as y,x as A,t as F,ag as b,X as C,P as O,k as P,a2 as X,E as j,_ as q,d as I}from"./index-2063e8c9.js";import G from"./index-56d736f8.js";import{a as E}from"./menu-b86efe06.js";import"./index-2ade9b29.js";import"./sortable.esm-0d19b1d3.js";const H={class:"absolute-container"},J={class:"page-main"},K={class:"custom-tree-node"},Q=["title"],U={class:"text"},W={class:"actions"},Y={key:1,class:"empty"},M=D({__name:"index",setup(Z){const B=v(),_=v([]),o=v({visible:!1,id:"",parentId:""});function f(){E.list().then(n=>{_.value=n.data})}L(()=>{f()});function N(n){o.value={visible:!1,id:"",parentId:""},C(()=>{o.value={visible:!0,id:"",parentId:n.id}})}function g(n){o.value={visible:!1,id:"",parentId:""},C(()=>{o.value={visible:!0,id:(n==null?void 0:n.id)??"",parentId:(n==null?void 0:n.parentId)??""}})}function $(n,a){X.confirm(`确认删除「${a.meta.title}」吗？`,"确认信息").then(()=>{E.delete(a.id).then(()=>{j.success({message:"模拟删除成功",center:!0});const r=n.parent,s=r.data.children||r.data,i=s.findIndex(d=>d.id===a.id);s.splice(i,1),_.value=[..._.value]})})}function w(){o.value={visible:!1,id:"",parentId:""},f()}return(n,a)=>{const r=O,s=p("el-button"),i=P,d=p("el-button-group"),z=p("ElTree"),S=p("el-scrollbar"),T=V;return u(),x("div",H,[e(r,{title:"导航管理",content:"页面数据为 Mock 示例数据，非真实数据。"}),c("div",J,[e(T,{"left-side-width":"300px","hide-left-side-toggle":""},{leftSide:t(()=>[e(d,{class:"btns"},{default:t(()=>[e(s,{type:"primary",class:"add",onClick:a[0]||(a[0]=h=>g())},{default:t(()=>[R(" 新增主导航 ")]),_:1}),e(s,{onClick:f},{icon:t(()=>[e(i,{name:"ep:refresh"})]),_:1})]),_:1}),e(S,{class:"tree"},{default:t(()=>[e(z,{ref_key:"menuRef",ref:B,data:m(_),"default-expand-all":""},{default:t(({node:h,data:l})=>[c("div",K,[c("div",{class:"label",title:l.meta.title},[l.meta.icon?(u(),y(i,{key:0,name:l.meta.icon,size:16,style:{"margin-right":"5px"}},null,8,["name"])):A("",!0),c("div",U,F(l.meta.title),1)],8,Q),c("div",W,[e(d,null,{default:t(()=>[e(s,{type:"primary",plain:"",size:"small",onClick:b(k=>N(l),["stop"])},{icon:t(()=>[e(i,{name:"ep:plus"})]),_:2},1032,["onClick"]),e(s,{type:"info",plain:"",size:"small",onClick:b(k=>g(l),["stop"])},{icon:t(()=>[e(i,{name:"ep:edit"})]),_:2},1032,["onClick"]),e(s,{type:"danger",plain:"",size:"small",onClick:b(k=>$(h,l),["stop"])},{icon:t(()=>[e(i,{name:"ep:delete"})]),_:2},1032,["onClick"])]),_:2},1024)])])]),_:1},8,["data"])]),_:1})]),default:t(()=>[m(o).visible?(u(),y(G,{key:0,id:m(o).id,"parent-id":m(o).parentId,onOnSubmit:w},null,8,["id","parent-id"])):(u(),x("div",Y," 请在左侧新增或编辑一个导航 "))]),_:1})])])}}});typeof I=="function"&&I(M);const le=q(M,[["__scopeId","data-v-c9017eba"]]);export{le as default};
